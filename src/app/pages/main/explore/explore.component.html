<div class="flex flex-col p-8 gap-12">
    <div class="flex pl-6 w-full items-center bg-primary rounded-lg border border-red-500 justify-between">
        <div class="flex py-8 flex-col gap-2">
            <h1 class="text-3xl !font-semibold !text-white">Premium Properties at Your Fingertips</h1>
            <p class="text-white text-sm ml-4">Browse curated listings, compare with ease, and make confident property decisions.</p>
        </div>
        <div class="justify-end">
            <img src="logo.png" width="200px" alt="Property Explore Image">
            <!-- <img src="house.png" width="200px" alt="Property Explore Image"> -->
        </div>
    </div>

    <div class="flex flex-col">
        <div class="flex flex-col md:flex-row items-center justify-between w-full space-y-4 md:space-y-0 mb-6">
           
            <h1 class="!text-gray-500 text-lg font-semibold cursor-pointer pb-6">All Properties</h1>

            <app-search-bar placeholder="Search Property" />
        </div>

        <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-8"
    >
      @if (loading) { @for (item of emptyArray; track $index) {
      <div class="h-fit flex relative rounded-lg w-full animate-pulse">
        <div class="bg-gray-200 w-full h-64 rounded-lg"></div>
      </div>
      } } @else if (error) {
      <div class="col-span-full text-center py-8">
        <p class="text-red-500">{{ error }}</p>
        <button
          (click)="loadProperties()"
          class="mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary/80"
        >
          Retry
        </button>
      </div>
      } @else { @for (property of properties; track property.id) {
      <div
        class="h-fit flex relative rounded-lg w-full cursor-pointer"
        (click)="handleViewProperty(property.slug)"
      >
        <div class="bg-foreground w-full h-full absolute z-0 rounded-lg">
          <img
            [src]="property.property_images && property.property_images.length > 0 && property.property_images[0].image_url ? property.property_images[0].image_url : 'images/property-image.jpg'"
            [alt]="property.name"
            class="w-full h-full object-cover rounded-lg opacity-60"
          />
        </div>
        <div class="flex flex-col gap-24 p-4 z-10 w-full">
          <div class="flex items-center gap-4">
            <span
              class="flex items-center !text-small text-[10px] text-white gap-1 px-2 py-1 border border-white rounded-full"
            >
              <app-icon name="airdrop" [size]="16"></app-icon>
              <p>{{ property.property_type.name || "Smart Home" }}</p>
            </span>
            <span
              class="flex items-center !text-small text-[10px] text-white gap-1 px-2 py-1 border border-white rounded-full"
            >
              <app-icon name="driving" [size]="16"></app-icon>
              <p>Good road network</p>
            </span>
          </div>
          <div class="bg-background p-4 min-w-full rounded-ss-lg rounded-se-lg">
            <div class="flex items-center justify-between mb-8">
              <div class="flex flex-col gap-1">
                <h2 class="text-[#4F4F4F] text-medium font-medium">
                  {{ property.name || "Property Name" }}
                </h2>
                <span class="flex items-center gap-2">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M2.41184 5.66261C3.72517 -0.110728 12.2785 -0.104061 13.5852 5.66927C14.3518 9.05594 12.2452 11.9226 10.3985 13.6959C9.0585 14.9893 6.9385 14.9893 5.59184 13.6959C3.75184 11.9226 1.64517 9.04927 2.41184 5.66261Z"
                      fill="#E41C24"
                    />
                    <path
                      d="M8.00188 8.95297C9.15063 8.95297 10.0819 8.02172 10.0819 6.87297C10.0819 5.72422 9.15063 4.79297 8.00188 4.79297C6.85312 4.79297 5.92188 5.72422 5.92188 6.87297C5.92188 8.02172 6.85312 8.95297 8.00188 8.95297Z"
                      fill="white"
                    />
                  </svg>
                  <p class="text-small text-[#7A7A7A]">
                    {{ property.location || "Location" }}
                  </p>
                </span>
              </div>
              <app-icon
                name="fav"
                class="text-primary p-2 rounded-full bg-primary/10 text-center"
                [size]="16"
              ></app-icon>
            </div>
            <div class="flex items-center justify-between gap-4">
              <h2 *ngIf="property.property_units && property.property_units.length > 0" class="text-[#4F4F4F] text-medium text-[15px] font-medium">
                {{ property.property_units[0].price | currency:'â‚¦':'symbol':'1.0-0' }}
              </h2>
              <span
                class="flex py-1 px-3 gap-[2px] text-primary text-normal text-[8px] bg-primary/10 rounded-full"
              >
                <h3 class="!text-primary">Unit Type:</h3>
                <p class="font-medium">
                    {{ property.property_units && property.property_units.length > 0 && property.property_units[0].unit_type.name ? property.property_units[0].unit_type.name : 'N/A' }}
                </p>
              </span>
            </div>
          </div>
        </div>
      </div>
      } }
    </div>
    
    <!-- Pagination -->
    @if (pagination && !loading && !error) {
      <div class="mt-8">
        <app-pagination
          [pagination]="pagination"
          [showInfo]="true"
          [maxVisiblePages]="5"
          (pageChange)="onPageChange($event)"
          (limitChange)="onLimitChange($event)"
        ></app-pagination>
      </div>
    }
  
        
    </div>
</div>
