<main class="flex flex-col w-full">
  <div class="w-full max-w-md flex flex-col gap-12">
    <!-- <h2 class="text-2xl font-semibold !mb-8 !text-gray-600">Change password</h2> -->
    <div class="flex gap-6">
        <!-- <app-icon class="cursor-pointer" name="arrow-left"></app-icon> -->
         <h1 class="text-2xl font-bold !text-gray-600">Change password</h1>
    </div>

    <form [formGroup]="passwordForm" (ngSubmit)="submit()" novalidate>

      <div class="flex flex-col gap-4">
        <!-- <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1 !text-gray-500">Current password</label>
        <nz-input-group nzPrefixIcon="lock">
          <input nz-input [type]="showOld ? 'text' : 'password'" formControlName="old_password" class="w-full" placeholder="Enter current password" />
          <ng-container nzSuffix>
            <i nz-icon [nzType]="showOld ? 'eye' : 'eye-invisible'" (click)="toggleShow('old')" class="cursor-pointer text-gray-500"></i>
          </ng-container>
        </nz-input-group>
        <p *ngIf="passwordForm.get('old_password')?.touched && passwordForm.get('old_password')?.hasError('required')" class="text-red-500 text-sm mt-1">Current password is required</p>
      </div> -->

      <div class="flex flex-col gap-2">
          <label for="old_password" class="text-sm sm:text-medium text-[#4F4F4F] leading-[100%] font-medium">Current Password</label>
          <div class="relative">
            <input
              [type]="showOldPassword ? 'text' : 'password'"
              id="old_password"
              formControlName="old_password"
              class="border rounded-xl sm:rounded-2xl px-4 sm:px-6 py-3 sm:py-[20px] text-sm sm:text-[16px] leading-[100%] text-[#7A7A7A] w-full border-gray-300"
              [class.error]="
                hasError('old_password', 'required')
              "
              placeholder="Enter your current password"
              [disabled]="isLoading"
            />
            <button
              type="button"
              class="absolute right-4 sm:right-6 top-1/2 -translate-y-1/2 z-10 cursor-pointer"
              (click)="toggleOldPasswordVisibility()"
              [disabled]="isLoading"
              [attr.aria-label]="
                showOldPassword ? 'Hide password' : 'Show password'
              "
            >
              <svg
                *ngIf="!showOldPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <svg
                *ngIf="showOldPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                ></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
            </button>
          </div>
          <div *ngIf="hasError('old_password', 'required')" class="text-primary text-xs sm:text-sm">
            Current password is required
          </div>
          <!-- <div *ngIf="hasError('old_password', 'minlength')" class="text-primary text-xs sm:text-sm">
            Password must be at least 6 characters
          </div> -->
        </div>

        <div class="flex flex-col gap-2">
          <label for="new_password" class="text-sm sm:text-medium text-[#4F4F4F] leading-[100%] font-medium">New Password</label>
          <div class="relative">
            <input
              [type]="showNewPassword ? 'text' : 'password'"
              id="new_password"
              formControlName="new_password"
              class="border rounded-xl sm:rounded-2xl px-4 sm:px-6 py-3 sm:py-[20px] text-sm sm:text-[16px] leading-[100%] text-[#7A7A7A] w-full border-gray-300"
              [class.error]="
                hasError('new_password', 'required') ||
                hasError('new_password', 'minlength')
              "
              placeholder="Enter your new password"
              [disabled]="isLoading"
            />
            <button
              type="button"
              class="absolute right-4 sm:right-6 top-1/2 -translate-y-1/2 z-10 cursor-pointer"
              (click)="toggleNewPasswordVisibility()"
              [disabled]="isLoading"
              [attr.aria-label]="
                showNewPassword ? 'Hide password' : 'Show password'
              "
            >
              <svg
                *ngIf="!showNewPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <svg
                *ngIf="showNewPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                ></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
            </button>
          </div>
          <div *ngIf="hasError('new_password', 'required')" class="text-primary text-xs sm:text-sm">
            New password is required
          </div>
          <div *ngIf="hasError('new_password', 'minlength')" class="text-primary text-xs sm:text-sm">
            Password must be at least 6 characters
          </div>
        </div>

        <div class="flex flex-col gap-2">
          <label for="confirm_password" class="text-sm sm:text-medium text-[#4F4F4F] leading-[100%] font-medium">Confirm new password</label>
          <div class="relative">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirm_password"
              formControlName="confirm_password"
              class="border rounded-xl sm:rounded-2xl px-4 sm:px-6 py-3 sm:py-[20px] text-sm sm:text-[16px] leading-[100%] text-[#7A7A7A] w-full border-gray-300"
              [class.error]="
                hasError('confirm_password', 'required')
              "
              placeholder="Confirm new password"
              [disabled]="isLoading"
            />
            <button
              type="button"
              class="absolute right-4 sm:right-6 top-1/2 -translate-y-1/2 z-10 cursor-pointer"
              (click)="toggleConfirmPasswordVisibility()"
              [disabled]="isLoading"
              [attr.aria-label]="
                showConfirmPassword ? 'Hide password' : 'Show password'
              "
            >
              <svg
                *ngIf="!showConfirmPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <svg
                *ngIf="showConfirmPassword"
                class="w-4 h-4 sm:w-5 sm:h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                ></path>
                <line x1="1" y1="1" x2="23" y2="23"></line>
              </svg>
            </button>
          </div>
          <div *ngIf="hasError('confirm_password', 'required')" class="text-primary text-xs sm:text-sm">
            Confirm password is required
          </div>
          <p *ngIf="passwordForm.get('confirm_password')?.touched && passwordForm.get('confirm_password')?.hasError('mismatch')" class="text-red-500 text-sm mt-1">Passwords do not match</p>
          <!-- <div *ngIf="hasError('confirm_password', 'minlength')" class="text-primary text-xs sm:text-sm">
            Password must be at least 6 characters
          </div> -->
        </div>

      <!-- <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1 !text-gray-500">New password</label>
        <nz-input-group nzPrefixIcon="lock">
          <input nz-input [type]="showNew ? 'text' : 'password'" formControlName="new_password" class="w-full" placeholder="Enter new password (min 8 chars)" />
          <ng-container nzSuffix>
            <i nz-icon [nzType]="showNew ? 'eye' : 'eye-invisible'" (click)="toggleShow('new')" class="cursor-pointer text-gray-500"></i>
          </ng-container>
        </nz-input-group>
        <p *ngIf="passwordForm.get('new_password')?.touched && passwordForm.get('new_password')?.hasError('required')" class="text-red-500 text-sm mt-1">New password is required</p>
        <p *ngIf="passwordForm.get('new_password')?.touched && passwordForm.get('new_password')?.hasError('minlength')" class="text-red-500 text-sm mt-1">Password must be at least 8 characters</p>
      </div> -->

      <!-- <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-1 !text-gray-500">Confirm new password</label>
        <nz-input-group nzPrefixIcon="lock">
          <input nz-input [type]="showConfirm ? 'text' : 'password'" formControlName="confirm_password" class="w-full" placeholder="Repeat new password" />
          <ng-container nzSuffix>
            <i nz-icon [nzType]="showConfirm ? 'eye' : 'eye-invisible'" (click)="toggleShow('confirm')" class="cursor-pointer text-gray-500"></i>
          </ng-container>
        </nz-input-group>
        <p *ngIf="passwordForm.get('confirm_password')?.touched && passwordForm.get('confirm_password')?.hasError('required')" class="text-red-500 text-sm mt-1">Please confirm new password</p>
        <p *ngIf="passwordForm.get('confirm_password')?.touched && passwordForm.get('confirm_password')?.hasError('mismatch')" class="text-red-500 text-sm mt-1">Passwords do not match</p>
      </div> -->

      <div class="flex items-center justify-center !mt-4">
        <!-- <button nz-button nzType="default" class="px-4 py-2 text-sm !bg-default !rounded-full" type="button">Cancel</button> -->

        <button nz-button nzType="primary"  class="!px-12 py-4 text-sm !bg-primary !rounded-full !border-none !text-white cursor-pointer" type="submit">Change password</button>
      </div>
      </div>

    </form>
  </div>
</main>
